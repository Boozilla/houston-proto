syntax = "proto3";
package houston.service;

option java_package = "houston.grpc.service";
option java_multiple_files = true;

import "google/protobuf/empty.proto";
import "google/protobuf/any.proto";
import "google/protobuf/descriptor.proto";

// 애셋 서비스
service AssetService
{
  // 리스트
  rpc list (google.protobuf.Empty) returns (stream AssetSheet);

  // 리스트
  rpc fetchList (google.protobuf.Empty) returns (AssetSheets);

  // 쿼리
  rpc query (AssetQueryRequest) returns (stream google.protobuf.Any);

  // 쿼리
  rpc fetchQuery (AssetQueryRequest) returns (AssetQueryResponse);
}

// 애셋 시트
message AssetSheet
{
  int64 size = 1;
  string commitId = 2;
  string name = 3;
  bytes structure = 4;
  bytes nullableFields = 5;
  repeated string partition = 6;
}

// 애셋 시트
message AssetSheets
{
  repeated AssetSheet sheet = 1;
}

// 쿼리 요청
message AssetQueryRequest
{
  string query = 1;
}

// 쿼리 응답
message AssetQueryResponse
{
  repeated google.protobuf.Any result = 1;
}
